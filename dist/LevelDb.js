// Copyright (c) Microsoft Corporation. Licensed under the MIT License.
function he(e){let i=e.length;for(;--i>=0;)e[i]=0}var Pi=0,hi=1,Vi=2,Xi=3,Yi=258,wt=29,Fe=256,ve=Fe+1+wt,oe=30,pt=19,di=2*ve+1,ee=15,Qe=16,Gi=7,yt=256,_i=16,ui=17,ci=18,ut=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),He=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ji=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wi=512,K=new Array((ve+2)*2);he(K);var we=new Array(oe*2);he(we);var ke=new Array(Wi);he(ke);var xe=new Array(Yi-Xi+1);he(xe);var vt=new Array(wt);he(vt);var Xe=new Array(oe);he(Xe);function et(e,i,t,a,n){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=a,this.max_length=n,this.has_stree=e&&e.length}var bi,wi,pi;function tt(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}var yi=e=>e<256?ke[e]:ke[256+(e>>>7)],me=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},N=(e,i,t)=>{e.bi_valid>Qe-t?(e.bi_buf|=i<<e.bi_valid&65535,me(e,e.bi_buf),e.bi_buf=i>>Qe-e.bi_valid,e.bi_valid+=t-Qe):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},$=(e,i,t)=>{N(e,t[i*2],t[i*2+1])},vi=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},qi=e=>{e.bi_valid===16?(me(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Ji=(e,i)=>{let t=i.dyn_tree,a=i.max_code,n=i.stat_desc.static_tree,r=i.stat_desc.has_stree,f=i.stat_desc.extra_bits,s=i.stat_desc.extra_base,d=i.stat_desc.max_length,l,o,g,u,h,c,A=0;for(u=0;u<=ee;u++)e.bl_count[u]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<di;l++)o=e.heap[l],u=t[t[o*2+1]*2+1]+1,u>d&&(u=d,A++),t[o*2+1]=u,!(o>a)&&(e.bl_count[u]++,h=0,o>=s&&(h=f[o-s]),c=t[o*2],e.opt_len+=c*(u+h),r&&(e.static_len+=c*(n[o*2+1]+h)));if(A!==0){do{for(u=d-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[d]--,A-=2}while(A>0);for(u=d;u!==0;u--)for(o=e.bl_count[u];o!==0;)g=e.heap[--l],!(g>a)&&(t[g*2+1]!==u&&(e.opt_len+=(u-t[g*2+1])*t[g*2],t[g*2+1]=u),o--)}},ki=(e,i,t)=>{let a=new Array(ee+1),n=0,r,f;for(r=1;r<=ee;r++)a[r]=n=n+t[r-1]<<1;for(f=0;f<=i;f++){let s=e[f*2+1];s!==0&&(e[f*2]=vi(a[s]++,s))}},Qi=()=>{let e,i,t,a,n,r=new Array(ee+1);for(t=0,a=0;a<wt-1;a++)for(vt[a]=t,e=0;e<1<<ut[a];e++)xe[t++]=a;for(xe[t-1]=a,n=0,a=0;a<16;a++)for(Xe[a]=n,e=0;e<1<<He[a];e++)ke[n++]=a;for(n>>=7;a<oe;a++)for(Xe[a]=n<<7,e=0;e<1<<He[a]-7;e++)ke[256+n++]=a;for(i=0;i<=ee;i++)r[i]=0;for(e=0;e<=143;)K[e*2+1]=8,e++,r[8]++;for(;e<=255;)K[e*2+1]=9,e++,r[9]++;for(;e<=279;)K[e*2+1]=7,e++,r[7]++;for(;e<=287;)K[e*2+1]=8,e++,r[8]++;for(ki(K,ve+1,r),e=0;e<oe;e++)we[e*2+1]=5,we[e*2]=vi(e,5);bi=new et(K,ut,Fe+1,ve,ee),wi=new et(we,He,0,oe,ee),pi=new et(new Array(0),ji,0,pt,Gi)},xi=e=>{let i;for(i=0;i<ve;i++)e.dyn_ltree[i*2]=0;for(i=0;i<oe;i++)e.dyn_dtree[i*2]=0;for(i=0;i<pt;i++)e.bl_tree[i*2]=0;e.dyn_ltree[yt*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},mi=e=>{e.bi_valid>8?me(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},en=(e,i,t,a)=>{mi(e),a&&(me(e,t),me(e,~t)),e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},At=(e,i,t,a)=>{let n=i*2,r=t*2;return e[n]<e[r]||e[n]===e[r]&&a[i]<=a[t]},it=(e,i,t)=>{let a=e.heap[t],n=t<<1;for(;n<=e.heap_len&&(n<e.heap_len&&At(i,e.heap[n+1],e.heap[n],e.depth)&&n++,!At(i,a,e.heap[n],e.depth));)e.heap[t]=e.heap[n],t=n,n<<=1;e.heap[t]=a},Lt=(e,i,t)=>{let a,n,r=0,f,s;if(e.last_lit!==0)do a=e.pending_buf[e.d_buf+r*2]<<8|e.pending_buf[e.d_buf+r*2+1],n=e.pending_buf[e.l_buf+r],r++,a===0?$(e,n,i):(f=xe[n],$(e,f+Fe+1,i),s=ut[f],s!==0&&(n-=vt[f],N(e,n,s)),a--,f=yi(a),$(e,f,t),s=He[f],s!==0&&(a-=Xe[f],N(e,a,s)));while(r<e.last_lit);$(e,yt,i)},ct=(e,i)=>{let t=i.dyn_tree,a=i.stat_desc.static_tree,n=i.stat_desc.has_stree,r=i.stat_desc.elems,f,s,d=-1,l;for(e.heap_len=0,e.heap_max=di,f=0;f<r;f++)t[f*2]!==0?(e.heap[++e.heap_len]=d=f,e.depth[f]=0):t[f*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,n&&(e.static_len-=a[l*2+1]);for(i.max_code=d,f=e.heap_len>>1;f>=1;f--)it(e,t,f);l=r;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],it(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=s,t[l*2]=t[f*2]+t[s*2],e.depth[l]=(e.depth[f]>=e.depth[s]?e.depth[f]:e.depth[s])+1,t[f*2+1]=t[s*2+1]=l,e.heap[1]=l++,it(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Ji(e,i),ki(t,d,e.bl_count)},Ft=(e,i,t)=>{let a,n=-1,r,f=i[0*2+1],s=0,d=7,l=4;for(f===0&&(d=138,l=3),i[(t+1)*2+1]=65535,a=0;a<=t;a++)r=f,f=i[(a+1)*2+1],!(++s<d&&r===f)&&(s<l?e.bl_tree[r*2]+=s:r!==0?(r!==n&&e.bl_tree[r*2]++,e.bl_tree[_i*2]++):s<=10?e.bl_tree[ui*2]++:e.bl_tree[ci*2]++,s=0,n=r,f===0?(d=138,l=3):r===f?(d=6,l=3):(d=7,l=4))},It=(e,i,t)=>{let a,n=-1,r,f=i[0*2+1],s=0,d=7,l=4;for(f===0&&(d=138,l=3),a=0;a<=t;a++)if(r=f,f=i[(a+1)*2+1],!(++s<d&&r===f)){if(s<l)do $(e,r,e.bl_tree);while(--s!==0);else r!==0?(r!==n&&($(e,r,e.bl_tree),s--),$(e,_i,e.bl_tree),N(e,s-3,2)):s<=10?($(e,ui,e.bl_tree),N(e,s-3,3)):($(e,ci,e.bl_tree),N(e,s-11,7));s=0,n=r,f===0?(d=138,l=3):r===f?(d=6,l=3):(d=7,l=4)}},tn=e=>{let i;for(Ft(e,e.dyn_ltree,e.l_desc.max_code),Ft(e,e.dyn_dtree,e.d_desc.max_code),ct(e,e.bl_desc),i=pt-1;i>=3&&e.bl_tree[gi[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},nn=(e,i,t,a)=>{let n;for(N(e,i-257,5),N(e,t-1,5),N(e,a-4,4),n=0;n<a;n++)N(e,e.bl_tree[gi[n]*2+1],3);It(e,e.dyn_ltree,i-1),It(e,e.dyn_dtree,t-1)},an=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<Fe;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},zt=!1,rn=e=>{zt||(Qi(),zt=!0),e.l_desc=new tt(e.dyn_ltree,bi),e.d_desc=new tt(e.dyn_dtree,wi),e.bl_desc=new tt(e.bl_tree,pi),e.bi_buf=0,e.bi_valid=0,xi(e)},Ei=(e,i,t,a)=>{N(e,(Pi<<1)+(a?1:0),3),en(e,i,t,!0)},ln=e=>{N(e,hi<<1,3),$(e,yt,K),qi(e)},sn=(e,i,t,a)=>{let n,r,f=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=an(e)),ct(e,e.l_desc),ct(e,e.d_desc),f=tn(e),n=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=n&&(n=r)):n=r=t+5,t+4<=n&&i!==-1?Ei(e,i,t,a):e.strategy===4||r===n?(N(e,(hi<<1)+(a?1:0),3),Lt(e,K,we)):(N(e,(Vi<<1)+(a?1:0),3),nn(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),Lt(e,e.dyn_ltree,e.dyn_dtree)),xi(e),a&&mi(e)},fn=(e,i,t)=>(e.pending_buf[e.d_buf+e.last_lit*2]=i>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=i&255,e.pending_buf[e.l_buf+e.last_lit]=t&255,e.last_lit++,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(xe[t]+Fe+1)*2]++,e.dyn_dtree[yi(i)*2]++),e.last_lit===e.lit_bufsize-1),on=rn,hn=Ei,dn=sn,_n=fn,un=ln,cn={_tr_init:on,_tr_stored_block:hn,_tr_flush_block:dn,_tr_tally:_n,_tr_align:un},gn=(e,i,t,a)=>{let n=e&65535|0,r=e>>>16&65535|0,f=0;for(;t!==0;){f=t>2e3?2e3:t,t-=f;do n=n+i[a++]|0,r=r+n|0;while(--f);n%=65521,r%=65521}return n|r<<16|0},Ee=gn,bn=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},wn=new Uint32Array(bn()),pn=(e,i,t,a)=>{let n=wn,r=a+t;e^=-1;for(let f=a;f<r;f++)e=e>>>8^n[(e^i[f])&255];return e^-1},D=pn,ie={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},de={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:yn,_tr_stored_block:vn,_tr_flush_block:kn,_tr_tally:j,_tr_align:xn}=cn,{Z_NO_FLUSH:le,Z_PARTIAL_FLUSH:mn,Z_FULL_FLUSH:En,Z_FINISH:W,Z_BLOCK:Ut,Z_OK:M,Z_STREAM_END:Rt,Z_STREAM_ERROR:B,Z_DATA_ERROR:Sn,Z_BUF_ERROR:nt,Z_DEFAULT_COMPRESSION:An,Z_FILTERED:Ln,Z_HUFFMAN_ONLY:Ze,Z_RLE:Fn,Z_FIXED:In,Z_DEFAULT_STRATEGY:zn,Z_UNKNOWN:Un,Z_DEFLATED:je}=de,Rn=9,Dn=15,Tn=8,Nn=29,Bn=256,gt=Bn+1+Nn,Zn=30,Cn=19,On=2*gt+1,$n=15,E=3,Y=258,C=Y+E+1,Mn=32,We=42,bt=69,Ke=73,Pe=91,Ve=103,te=113,ge=666,R=1,Ie=2,ne=3,_e=4,Hn=3,G=(e,i)=>(e.msg=ie[i],i),Dt=e=>(e<<1)-(e>4?9:0),X=e=>{let i=e.length;for(;--i>=0;)e[i]=0},Kn=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,q=Kn,V=e=>{let i=e.state,t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},T=(e,i)=>{kn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,V(e.strm)},L=(e,i)=>{e.pending_buf[e.pending++]=i},ce=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},Pn=(e,i,t,a)=>{let n=e.avail_in;return n>a&&(n=a),n===0?0:(e.avail_in-=n,i.set(e.input.subarray(e.next_in,e.next_in+n),t),e.state.wrap===1?e.adler=Ee(e.adler,i,n,t):e.state.wrap===2&&(e.adler=D(e.adler,i,n,t)),e.next_in+=n,e.total_in+=n,n)},Si=(e,i)=>{let t=e.max_chain_length,a=e.strstart,n,r,f=e.prev_length,s=e.nice_match,d=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,l=e.window,o=e.w_mask,g=e.prev,u=e.strstart+Y,h=l[a+f-1],c=l[a+f];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=i,!(l[n+f]!==c||l[n+f-1]!==h||l[n]!==l[a]||l[++n]!==l[a+1])){a+=2,n++;do;while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<u);if(r=Y-(u-a),a=u-Y,r>f){if(e.match_start=i,f=r,r>=s)break;h=l[a+f-1],c=l[a+f]}}while((i=g[i&o])>d&&--t!==0);return f<=e.lookahead?f:e.lookahead},ae=e=>{let i=e.w_size,t,a,n,r,f;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-C)){e.window.set(e.window.subarray(i,i+i),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,a=e.hash_size,t=a;do n=e.head[--t],e.head[t]=n>=i?n-i:0;while(--a);a=i,t=a;do n=e.prev[--t],e.prev[t]=n>=i?n-i:0;while(--a);r+=i}if(e.strm.avail_in===0)break;if(a=Pn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=a,e.lookahead+e.insert>=E)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=q(e,e.ins_h,e.window[f+1]);e.insert&&(e.ins_h=q(e,e.ins_h,e.window[f+E-1]),e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<C&&e.strm.avail_in!==0)},Vn=(e,i)=>{let t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ae(e),e.lookahead===0&&i===le)return R;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;let a=e.block_start+t;if((e.strstart===0||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,T(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-C&&(T(e,!1),e.strm.avail_out===0))return R}return e.insert=0,i===W?(T(e,!0),e.strm.avail_out===0?ne:_e):(e.strstart>e.block_start&&(T(e,!1),e.strm.avail_out===0),R)},at=(e,i)=>{let t,a;for(;;){if(e.lookahead<C){if(ae(e),e.lookahead<C&&i===le)return R;if(e.lookahead===0)break}if(t=0,e.lookahead>=E&&(e.ins_h=q(e,e.ins_h,e.window[e.strstart+E-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-C&&(e.match_length=Si(e,t)),e.match_length>=E)if(a=j(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){e.match_length--;do e.strstart++,e.ins_h=q(e,e.ins_h,e.window[e.strstart+E-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=q(e,e.ins_h,e.window[e.strstart+1]);else a=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(T(e,!1),e.strm.avail_out===0))return R}return e.insert=e.strstart<E-1?e.strstart:E-1,i===W?(T(e,!0),e.strm.avail_out===0?ne:_e):e.last_lit&&(T(e,!1),e.strm.avail_out===0)?R:Ie},se=(e,i)=>{let t,a,n;for(;;){if(e.lookahead<C){if(ae(e),e.lookahead<C&&i===le)return R;if(e.lookahead===0)break}if(t=0,e.lookahead>=E&&(e.ins_h=q(e,e.ins_h,e.window[e.strstart+E-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-C&&(e.match_length=Si(e,t),e.match_length<=5&&(e.strategy===Ln||e.match_length===E&&e.strstart-e.match_start>4096)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-E,a=j(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=q(e,e.ins_h,e.window[e.strstart+E-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=E-1,e.strstart++,a&&(T(e,!1),e.strm.avail_out===0))return R}else if(e.match_available){if(a=j(e,0,e.window[e.strstart-1]),a&&T(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return R}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=j(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,i===W?(T(e,!0),e.strm.avail_out===0?ne:_e):e.last_lit&&(T(e,!1),e.strm.avail_out===0)?R:Ie},Xn=(e,i)=>{let t,a,n,r,f=e.window;for(;;){if(e.lookahead<=Y){if(ae(e),e.lookahead<=Y&&i===le)return R;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=E&&e.strstart>0&&(n=e.strstart-1,a=f[n],a===f[++n]&&a===f[++n]&&a===f[++n])){r=e.strstart+Y;do;while(a===f[++n]&&a===f[++n]&&a===f[++n]&&a===f[++n]&&a===f[++n]&&a===f[++n]&&a===f[++n]&&a===f[++n]&&n<r);e.match_length=Y-(r-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(t=j(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(T(e,!1),e.strm.avail_out===0))return R}return e.insert=0,i===W?(T(e,!0),e.strm.avail_out===0?ne:_e):e.last_lit&&(T(e,!1),e.strm.avail_out===0)?R:Ie},Yn=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(ae(e),e.lookahead===0)){if(i===le)return R;break}if(e.match_length=0,t=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(T(e,!1),e.strm.avail_out===0))return R}return e.insert=0,i===W?(T(e,!0),e.strm.avail_out===0?ne:_e):e.last_lit&&(T(e,!1),e.strm.avail_out===0)?R:Ie};function O(e,i,t,a,n){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=a,this.func=n}var be=[new O(0,0,0,0,Vn),new O(4,4,8,4,at),new O(4,5,16,8,at),new O(4,6,32,32,at),new O(4,4,16,16,se),new O(8,16,32,32,se),new O(8,16,128,128,se),new O(8,32,128,256,se),new O(32,128,258,1024,se),new O(32,258,258,4096,se)],Gn=e=>{e.window_size=2*e.w_size,X(e.head),e.max_lazy_match=be[e.level].max_lazy,e.good_match=be[e.level].good_length,e.nice_match=be[e.level].nice_length,e.max_chain_length=be[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=E-1,e.match_available=0,e.ins_h=0};function jn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=je,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(On*2),this.dyn_dtree=new Uint16Array((2*Zn+1)*2),this.bl_tree=new Uint16Array((2*Cn+1)*2),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array($n+1),this.heap=new Uint16Array(2*gt+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*gt+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ai=e=>{if(!e||!e.state)return G(e,B);e.total_in=e.total_out=0,e.data_type=Un;let i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap?We:te,e.adler=i.wrap===2?0:1,i.last_flush=le,yn(i),M},Li=e=>{let i=Ai(e);return i===M&&Gn(e.state),i},Wn=(e,i)=>!e||!e.state||e.state.wrap!==2?B:(e.state.gzhead=i,M),Fi=(e,i,t,a,n,r)=>{if(!e)return B;let f=1;if(i===An&&(i=6),a<0?(f=0,a=-a):a>15&&(f=2,a-=16),n<1||n>Rn||t!==je||a<8||a>15||i<0||i>9||r<0||r>In)return G(e,B);a===8&&(a=9);let s=new jn;return e.state=s,s.strm=e,s.wrap=f,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+E-1)/E),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=i,s.strategy=r,s.method=t,Li(e)},qn=(e,i)=>Fi(e,i,je,Dn,Tn,zn),Jn=(e,i)=>{let t,a;if(!e||!e.state||i>Ut||i<0)return e?G(e,B):B;let n=e.state;if(!e.output||!e.input&&e.avail_in!==0||n.status===ge&&i!==W)return G(e,e.avail_out===0?nt:B);n.strm=e;let r=n.last_flush;if(n.last_flush=i,n.status===We)if(n.wrap===2)e.adler=0,L(n,31),L(n,139),L(n,8),n.gzhead?(L(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),L(n,n.gzhead.time&255),L(n,n.gzhead.time>>8&255),L(n,n.gzhead.time>>16&255),L(n,n.gzhead.time>>24&255),L(n,n.level===9?2:n.strategy>=Ze||n.level<2?4:0),L(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(L(n,n.gzhead.extra.length&255),L(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=D(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=bt):(L(n,0),L(n,0),L(n,0),L(n,0),L(n,0),L(n,n.level===9?2:n.strategy>=Ze||n.level<2?4:0),L(n,Hn),n.status=te);else{let f=je+(n.w_bits-8<<4)<<8,s=-1;n.strategy>=Ze||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,f|=s<<6,n.strstart!==0&&(f|=Mn),f+=31-f%31,n.status=te,ce(n,f),n.strstart!==0&&(ce(n,e.adler>>>16),ce(n,e.adler&65535)),e.adler=1}if(n.status===bt)if(n.gzhead.extra){for(t=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),V(e),t=n.pending,n.pending===n.pending_buf_size));)L(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Ke)}else n.status=Ke;if(n.status===Ke)if(n.gzhead.name){t=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),V(e),t=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,L(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),a===0&&(n.gzindex=0,n.status=Pe)}else n.status=Pe;if(n.status===Pe)if(n.gzhead.comment){t=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),V(e),t=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,L(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=D(e.adler,n.pending_buf,n.pending-t,t)),a===0&&(n.status=Ve)}else n.status=Ve;if(n.status===Ve&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&V(e),n.pending+2<=n.pending_buf_size&&(L(n,e.adler&255),L(n,e.adler>>8&255),e.adler=0,n.status=te)):n.status=te),n.pending!==0){if(V(e),e.avail_out===0)return n.last_flush=-1,M}else if(e.avail_in===0&&Dt(i)<=Dt(r)&&i!==W)return G(e,nt);if(n.status===ge&&e.avail_in!==0)return G(e,nt);if(e.avail_in!==0||n.lookahead!==0||i!==le&&n.status!==ge){let f=n.strategy===Ze?Yn(n,i):n.strategy===Fn?Xn(n,i):be[n.level].func(n,i);if((f===ne||f===_e)&&(n.status=ge),f===R||f===ne)return e.avail_out===0&&(n.last_flush=-1),M;if(f===Ie&&(i===mn?xn(n):i!==Ut&&(vn(n,0,0,!1),i===En&&(X(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),V(e),e.avail_out===0))return n.last_flush=-1,M}return i!==W?M:n.wrap<=0?Rt:(n.wrap===2?(L(n,e.adler&255),L(n,e.adler>>8&255),L(n,e.adler>>16&255),L(n,e.adler>>24&255),L(n,e.total_in&255),L(n,e.total_in>>8&255),L(n,e.total_in>>16&255),L(n,e.total_in>>24&255)):(ce(n,e.adler>>>16),ce(n,e.adler&65535)),V(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?M:Rt)},Qn=e=>{if(!e||!e.state)return B;let i=e.state.status;return i!==We&&i!==bt&&i!==Ke&&i!==Pe&&i!==Ve&&i!==te&&i!==ge?G(e,B):(e.state=null,i===te?G(e,Sn):M)},ea=(e,i)=>{let t=i.length;if(!e||!e.state)return B;let a=e.state,n=a.wrap;if(n===2||n===1&&a.status!==We||a.lookahead)return B;if(n===1&&(e.adler=Ee(e.adler,i,t,0)),a.wrap=0,t>=a.w_size){n===0&&(X(a.head),a.strstart=0,a.block_start=0,a.insert=0);let d=new Uint8Array(a.w_size);d.set(i.subarray(t-a.w_size,t),0),i=d,t=a.w_size}let r=e.avail_in,f=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,ae(a);a.lookahead>=E;){let d=a.strstart,l=a.lookahead-(E-1);do a.ins_h=q(a,a.ins_h,a.window[d+E-1]),a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++;while(--l);a.strstart=d,a.lookahead=E-1,ae(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=E-1,a.match_available=0,e.next_in=f,e.input=s,e.avail_in=r,a.wrap=n,M},ta=qn,ia=Fi,na=Li,aa=Ai,ra=Wn,la=Jn,sa=Qn,fa=ea,oa="pako deflate (from Nodeca project)",pe={deflateInit:ta,deflateInit2:ia,deflateReset:na,deflateResetKeep:aa,deflateSetHeader:ra,deflate:la,deflateEnd:sa,deflateSetDictionary:fa,deflateInfo:oa},ha=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),da=function(e){let i=Array.prototype.slice.call(arguments,1);for(;i.length;){let t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let a in t)ha(t,a)&&(e[a]=t[a])}}return e},_a=e=>{let i=0;for(let a=0,n=e.length;a<n;a++)i+=e[a].length;let t=new Uint8Array(i);for(let a=0,n=0,r=e.length;a<r;a++){let f=e[a];t.set(f,n),n+=f.length}return t},qe={assign:da,flattenChunks:_a},Ii=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ii=!1}var Se=new Uint8Array(256);for(let e=0;e<256;e++)Se[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Se[254]=Se[254]=1;var ua=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,a,n,r,f=e.length,s=0;for(n=0;n<f;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<f&&(a=e.charCodeAt(n+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),n++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(s),r=0,n=0;r<s;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<f&&(a=e.charCodeAt(n+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),n++)),t<128?i[r++]=t:t<2048?(i[r++]=192|t>>>6,i[r++]=128|t&63):t<65536?(i[r++]=224|t>>>12,i[r++]=128|t>>>6&63,i[r++]=128|t&63):(i[r++]=240|t>>>18,i[r++]=128|t>>>12&63,i[r++]=128|t>>>6&63,i[r++]=128|t&63);return i},ca=(e,i)=>{if(i<65534&&e.subarray&&Ii)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let a=0;a<i;a++)t+=String.fromCharCode(e[a]);return t},ga=(e,i)=>{let t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let a,n,r=new Array(t*2);for(n=0,a=0;a<t;){let f=e[a++];if(f<128){r[n++]=f;continue}let s=Se[f];if(s>4){r[n++]=65533,a+=s-1;continue}for(f&=s===2?31:s===3?15:7;s>1&&a<t;)f=f<<6|e[a++]&63,s--;if(s>1){r[n++]=65533;continue}f<65536?r[n++]=f:(f-=65536,r[n++]=55296|f>>10&1023,r[n++]=56320|f&1023)}return ca(r,n)},ba=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+Se[e[t]]>i?t:i},Ae={string2buf:ua,buf2string:ga,utf8border:ba};function wa(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zi=wa,Ui=Object.prototype.toString,{Z_NO_FLUSH:pa,Z_SYNC_FLUSH:ya,Z_FULL_FLUSH:va,Z_FINISH:ka,Z_OK:Ye,Z_STREAM_END:xa,Z_DEFAULT_COMPRESSION:ma,Z_DEFAULT_STRATEGY:Ea,Z_DEFLATED:Sa}=de;function ze(e){this.options=qe.assign({level:ma,method:Sa,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ea},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zi,this.strm.avail_out=0;let t=pe.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==Ye)throw new Error(ie[t]);if(i.header&&pe.deflateSetHeader(this.strm,i.header),i.dictionary){let a;if(typeof i.dictionary=="string"?a=Ae.string2buf(i.dictionary):Ui.call(i.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(i.dictionary):a=i.dictionary,t=pe.deflateSetDictionary(this.strm,a),t!==Ye)throw new Error(ie[t]);this._dict_set=!0}}ze.prototype.push=function(e,i){let t=this.strm,a=this.options.chunkSize,n,r;if(this.ended)return!1;for(i===~~i?r=i:r=i===!0?ka:pa,typeof e=="string"?t.input=Ae.string2buf(e):Ui.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),(r===ya||r===va)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(n=pe.deflate(t,r),n===xa)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),n=pe.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Ye;if(t.avail_out===0){this.onData(t.output);continue}if(r>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};ze.prototype.onData=function(e){this.chunks.push(e)};ze.prototype.onEnd=function(e){e===Ye&&(this.result=qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function kt(e,i){let t=new ze(i);if(t.push(e,!0),t.err)throw t.msg||ie[t.err];return t.result}function Aa(e,i){return i=i||{},i.raw=!0,kt(e,i)}function La(e,i){return i=i||{},i.gzip=!0,kt(e,i)}var Fa=ze,Ia=kt,za=Aa,Ua=La,Ra=de,Da={Deflate:Fa,deflate:Ia,deflateRaw:za,gzip:Ua,constants:Ra},Ce=30,Ta=12,Na=function(i,t){let a,n,r,f,s,d,l,o,g,u,h,c,A,v,p,m,y,_,S,U,b,F,w,k,x=i.state;a=i.next_in,w=i.input,n=a+(i.avail_in-5),r=i.next_out,k=i.output,f=r-(t-i.avail_out),s=r+(i.avail_out-257),d=x.dmax,l=x.wsize,o=x.whave,g=x.wnext,u=x.window,h=x.hold,c=x.bits,A=x.lencode,v=x.distcode,p=(1<<x.lenbits)-1,m=(1<<x.distbits)-1;e:do{c<15&&(h+=w[a++]<<c,c+=8,h+=w[a++]<<c,c+=8),y=A[h&p];t:for(;;){if(_=y>>>24,h>>>=_,c-=_,_=y>>>16&255,_===0)k[r++]=y&65535;else if(_&16){S=y&65535,_&=15,_&&(c<_&&(h+=w[a++]<<c,c+=8),S+=h&(1<<_)-1,h>>>=_,c-=_),c<15&&(h+=w[a++]<<c,c+=8,h+=w[a++]<<c,c+=8),y=v[h&m];i:for(;;){if(_=y>>>24,h>>>=_,c-=_,_=y>>>16&255,_&16){if(U=y&65535,_&=15,c<_&&(h+=w[a++]<<c,c+=8,c<_&&(h+=w[a++]<<c,c+=8)),U+=h&(1<<_)-1,U>d){i.msg="invalid distance too far back",x.mode=Ce;break e}if(h>>>=_,c-=_,_=r-f,U>_){if(_=U-_,_>o&&x.sane){i.msg="invalid distance too far back",x.mode=Ce;break e}if(b=0,F=u,g===0){if(b+=l-_,_<S){S-=_;do k[r++]=u[b++];while(--_);b=r-U,F=k}}else if(g<_){if(b+=l+g-_,_-=g,_<S){S-=_;do k[r++]=u[b++];while(--_);if(b=0,g<S){_=g,S-=_;do k[r++]=u[b++];while(--_);b=r-U,F=k}}}else if(b+=g-_,_<S){S-=_;do k[r++]=u[b++];while(--_);b=r-U,F=k}for(;S>2;)k[r++]=F[b++],k[r++]=F[b++],k[r++]=F[b++],S-=3;S&&(k[r++]=F[b++],S>1&&(k[r++]=F[b++]))}else{b=r-U;do k[r++]=k[b++],k[r++]=k[b++],k[r++]=k[b++],S-=3;while(S>2);S&&(k[r++]=k[b++],S>1&&(k[r++]=k[b++]))}}else if((_&64)===0){y=v[(y&65535)+(h&(1<<_)-1)];continue i}else{i.msg="invalid distance code",x.mode=Ce;break e}break}}else if((_&64)===0){y=A[(y&65535)+(h&(1<<_)-1)];continue t}else if(_&32){x.mode=Ta;break e}else{i.msg="invalid literal/length code",x.mode=Ce;break e}break}}while(a<n&&r<s);S=c>>3,a-=S,c-=S<<3,h&=(1<<c)-1,i.next_in=a,i.next_out=r,i.avail_in=a<n?5+(n-a):5-(a-n),i.avail_out=r<s?257+(s-r):257-(r-s),x.hold=h,x.bits=c},fe=15,Tt=852,Nt=592,Bt=0,rt=1,Zt=2,Ba=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Za=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ca=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Oa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$a=(e,i,t,a,n,r,f,s)=>{let d=s.bits,l=0,o=0,g=0,u=0,h=0,c=0,A=0,v=0,p=0,m=0,y,_,S,U,b,F=null,w=0,k,x=new Uint16Array(fe+1),Q=new Uint16Array(fe+1),Te=null,Et=0,St,Ne,Be;for(l=0;l<=fe;l++)x[l]=0;for(o=0;o<a;o++)x[i[t+o]]++;for(h=d,u=fe;u>=1&&x[u]===0;u--);if(h>u&&(h=u),u===0)return n[r++]=1<<24|64<<16|0,n[r++]=1<<24|64<<16|0,s.bits=1,0;for(g=1;g<u&&x[g]===0;g++);for(h<g&&(h=g),v=1,l=1;l<=fe;l++)if(v<<=1,v-=x[l],v<0)return-1;if(v>0&&(e===Bt||u!==1))return-1;for(Q[1]=0,l=1;l<fe;l++)Q[l+1]=Q[l]+x[l];for(o=0;o<a;o++)i[t+o]!==0&&(f[Q[i[t+o]]++]=o);if(e===Bt?(F=Te=f,k=19):e===rt?(F=Ba,w-=257,Te=Za,Et-=257,k=256):(F=Ca,Te=Oa,k=-1),m=0,o=0,l=g,b=r,c=h,A=0,S=-1,p=1<<h,U=p-1,e===rt&&p>Tt||e===Zt&&p>Nt)return 1;for(;;){St=l-A,f[o]<k?(Ne=0,Be=f[o]):f[o]>k?(Ne=Te[Et+f[o]],Be=F[w+f[o]]):(Ne=96,Be=0),y=1<<l-A,_=1<<c,g=_;do _-=y,n[b+(m>>A)+_]=St<<24|Ne<<16|Be|0;while(_!==0);for(y=1<<l-1;m&y;)y>>=1;if(y!==0?(m&=y-1,m+=y):m=0,o++,--x[l]===0){if(l===u)break;l=i[t+f[o]]}if(l>h&&(m&U)!==S){for(A===0&&(A=h),b+=g,c=l-A,v=1<<c;c+A<u&&(v-=x[c+A],!(v<=0));)c++,v<<=1;if(p+=1<<c,e===rt&&p>Tt||e===Zt&&p>Nt)return 1;S=m&U,n[S]=h<<24|c<<16|b-r|0}}return m!==0&&(n[b+m]=l-A<<24|64<<16|0),s.bits=h,0},ye=$a,Ma=0,Ri=1,Di=2,{Z_FINISH:Ct,Z_BLOCK:Ha,Z_TREES:Oe,Z_OK:re,Z_STREAM_END:Ka,Z_NEED_DICT:Pa,Z_STREAM_ERROR:Z,Z_DATA_ERROR:Ti,Z_MEM_ERROR:Ni,Z_BUF_ERROR:Va,Z_DEFLATED:Ot}=de,Bi=1,$t=2,Mt=3,Ht=4,Kt=5,Pt=6,Vt=7,Xt=8,Yt=9,Gt=10,Ge=11,H=12,lt=13,jt=14,st=15,Wt=16,qt=17,Jt=18,Qt=19,$e=20,Me=21,ei=22,ti=23,ii=24,ni=25,ai=26,ft=27,ri=28,li=29,z=30,Zi=31,Xa=32,Ya=852,Ga=592,ja=15,Wa=ja,si=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function qa(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ci=e=>{if(!e||!e.state)return Z;let i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=Bi,i.last=0,i.havedict=0,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Ya),i.distcode=i.distdyn=new Int32Array(Ga),i.sane=1,i.back=-1,re},Oi=e=>{if(!e||!e.state)return Z;let i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,Ci(e)},$i=(e,i)=>{let t;if(!e||!e.state)return Z;let a=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+1,i<48&&(i&=15)),i&&(i<8||i>15)?Z:(a.window!==null&&a.wbits!==i&&(a.window=null),a.wrap=t,a.wbits=i,Oi(e))},Mi=(e,i)=>{if(!e)return Z;let t=new qa;e.state=t,t.window=null;let a=$i(e,i);return a!==re&&(e.state=null),a},Ja=e=>Mi(e,Wa),fi=!0,ot,ht,Qa=e=>{if(fi){ot=new Int32Array(512),ht=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(ye(Ri,e.lens,0,288,ot,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;ye(Di,e.lens,0,32,ht,0,e.work,{bits:5}),fi=!1}e.lencode=ot,e.lenbits=9,e.distcode=ht,e.distbits=5},Hi=(e,i,t,a)=>{let n,r=e.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),a>=r.wsize?(r.window.set(i.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>a&&(n=a),r.window.set(i.subarray(t-a,t-a+n),r.wnext),a-=n,a?(r.window.set(i.subarray(t-a,t),0),r.wnext=a,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0},er=(e,i)=>{let t,a,n,r,f,s,d,l,o,g,u,h,c,A,v=0,p,m,y,_,S,U,b,F,w=new Uint8Array(4),k,x,Q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z;t=e.state,t.mode===H&&(t.mode=lt),f=e.next_out,n=e.output,d=e.avail_out,r=e.next_in,a=e.input,s=e.avail_in,l=t.hold,o=t.bits,g=s,u=d,F=re;e:for(;;)switch(t.mode){case Bi:if(t.wrap===0){t.mode=lt;break}for(;o<16;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(t.wrap&2&&l===35615){t.check=0,w[0]=l&255,w[1]=l>>>8&255,t.check=D(t.check,w,2,0),l=0,o=0,t.mode=$t;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=z;break}if((l&15)!==Ot){e.msg="unknown compression method",t.mode=z;break}if(l>>>=4,o-=4,b=(l&15)+8,t.wbits===0)t.wbits=b;else if(b>t.wbits){e.msg="invalid window size",t.mode=z;break}t.dmax=1<<t.wbits,e.adler=t.check=1,t.mode=l&512?Gt:H,l=0,o=0;break;case $t:for(;o<16;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(t.flags=l,(t.flags&255)!==Ot){e.msg="unknown compression method",t.mode=z;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=z;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=D(t.check,w,2,0)),l=0,o=0,t.mode=Mt;case Mt:for(;o<32;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.head&&(t.head.time=l),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,w[2]=l>>>16&255,w[3]=l>>>24&255,t.check=D(t.check,w,4,0)),l=0,o=0,t.mode=Ht;case Ht:for(;o<16;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=D(t.check,w,2,0)),l=0,o=0,t.mode=Kt;case Kt:if(t.flags&1024){for(;o<16;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=D(t.check,w,2,0)),l=0,o=0}else t.head&&(t.head.extra=null);t.mode=Pt;case Pt:if(t.flags&1024&&(h=t.length,h>s&&(h=s),h&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(a.subarray(r,r+h),b)),t.flags&512&&(t.check=D(t.check,a,h,r)),s-=h,r+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Vt;case Vt:if(t.flags&2048){if(s===0)break e;h=0;do b=a[r+h++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&h<s);if(t.flags&512&&(t.check=D(t.check,a,h,r)),s-=h,r+=h,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Xt;case Xt:if(t.flags&4096){if(s===0)break e;h=0;do b=a[r+h++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&h<s);if(t.flags&512&&(t.check=D(t.check,a,h,r)),s-=h,r+=h,b)break e}else t.head&&(t.head.comment=null);t.mode=Yt;case Yt:if(t.flags&512){for(;o<16;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=z;break}l=0,o=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=H;break;case Gt:for(;o<32;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}e.adler=t.check=si(l),l=0,o=0,t.mode=Ge;case Ge:if(t.havedict===0)return e.next_out=f,e.avail_out=d,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=o,Pa;e.adler=t.check=1,t.mode=H;case H:if(i===Ha||i===Oe)break e;case lt:if(t.last){l>>>=o&7,o-=o&7,t.mode=ft;break}for(;o<3;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}switch(t.last=l&1,l>>>=1,o-=1,l&3){case 0:t.mode=jt;break;case 1:if(Qa(t),t.mode=$e,i===Oe){l>>>=2,o-=2;break e}break;case 2:t.mode=qt;break;case 3:e.msg="invalid block type",t.mode=z}l>>>=2,o-=2;break;case jt:for(l>>>=o&7,o-=o&7;o<32;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=z;break}if(t.length=l&65535,l=0,o=0,t.mode=st,i===Oe)break e;case st:t.mode=Wt;case Wt:if(h=t.length,h){if(h>s&&(h=s),h>d&&(h=d),h===0)break e;n.set(a.subarray(r,r+h),f),s-=h,r+=h,d-=h,f+=h,t.length-=h;break}t.mode=H;break;case qt:for(;o<14;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(t.nlen=(l&31)+257,l>>>=5,o-=5,t.ndist=(l&31)+1,l>>>=5,o-=5,t.ncode=(l&15)+4,l>>>=4,o-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=z;break}t.have=0,t.mode=Jt;case Jt:for(;t.have<t.ncode;){for(;o<3;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.lens[Q[t.have++]]=l&7,l>>>=3,o-=3}for(;t.have<19;)t.lens[Q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},F=ye(Ma,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,F){e.msg="invalid code lengths set",t.mode=z;break}t.have=0,t.mode=Qt;case Qt:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[l&(1<<t.lenbits)-1],p=v>>>24,m=v>>>16&255,y=v&65535,!(p<=o);){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(y<16)l>>>=p,o-=p,t.lens[t.have++]=y;else{if(y===16){for(x=p+2;o<x;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(l>>>=p,o-=p,t.have===0){e.msg="invalid bit length repeat",t.mode=z;break}b=t.lens[t.have-1],h=3+(l&3),l>>>=2,o-=2}else if(y===17){for(x=p+3;o<x;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}l>>>=p,o-=p,b=0,h=3+(l&7),l>>>=3,o-=3}else{for(x=p+7;o<x;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}l>>>=p,o-=p,b=0,h=11+(l&127),l>>>=7,o-=7}if(t.have+h>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=z;break}for(;h--;)t.lens[t.have++]=b}}if(t.mode===z)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=z;break}if(t.lenbits=9,k={bits:t.lenbits},F=ye(Ri,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,F){e.msg="invalid literal/lengths set",t.mode=z;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},F=ye(Di,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,F){e.msg="invalid distances set",t.mode=z;break}if(t.mode=$e,i===Oe)break e;case $e:t.mode=Me;case Me:if(s>=6&&d>=258){e.next_out=f,e.avail_out=d,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=o,Na(e,u),f=e.next_out,n=e.output,d=e.avail_out,r=e.next_in,a=e.input,s=e.avail_in,l=t.hold,o=t.bits,t.mode===H&&(t.back=-1);break}for(t.back=0;v=t.lencode[l&(1<<t.lenbits)-1],p=v>>>24,m=v>>>16&255,y=v&65535,!(p<=o);){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(m&&(m&240)===0){for(_=p,S=m,U=y;v=t.lencode[U+((l&(1<<_+S)-1)>>_)],p=v>>>24,m=v>>>16&255,y=v&65535,!(_+p<=o);){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}l>>>=_,o-=_,t.back+=_}if(l>>>=p,o-=p,t.back+=p,t.length=y,m===0){t.mode=ai;break}if(m&32){t.back=-1,t.mode=H;break}if(m&64){e.msg="invalid literal/length code",t.mode=z;break}t.extra=m&15,t.mode=ei;case ei:if(t.extra){for(x=t.extra;o<x;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,o-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ti;case ti:for(;v=t.distcode[l&(1<<t.distbits)-1],p=v>>>24,m=v>>>16&255,y=v&65535,!(p<=o);){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if((m&240)===0){for(_=p,S=m,U=y;v=t.distcode[U+((l&(1<<_+S)-1)>>_)],p=v>>>24,m=v>>>16&255,y=v&65535,!(_+p<=o);){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}l>>>=_,o-=_,t.back+=_}if(l>>>=p,o-=p,t.back+=p,m&64){e.msg="invalid distance code",t.mode=z;break}t.offset=y,t.extra=m&15,t.mode=ii;case ii:if(t.extra){for(x=t.extra;o<x;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,o-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=z;break}t.mode=ni;case ni:if(d===0)break e;if(h=u-d,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=z;break}h>t.wnext?(h-=t.wnext,c=t.wsize-h):c=t.wnext-h,h>t.length&&(h=t.length),A=t.window}else A=n,c=f-t.offset,h=t.length;h>d&&(h=d),d-=h,t.length-=h;do n[f++]=A[c++];while(--h);t.length===0&&(t.mode=Me);break;case ai:if(d===0)break e;n[f++]=t.length,d--,t.mode=Me;break;case ft:if(t.wrap){for(;o<32;){if(s===0)break e;s--,l|=a[r++]<<o,o+=8}if(u-=d,e.total_out+=u,t.total+=u,u&&(e.adler=t.check=t.flags?D(t.check,n,u,f-u):Ee(t.check,n,u,f-u)),u=d,(t.flags?l:si(l))!==t.check){e.msg="incorrect data check",t.mode=z;break}l=0,o=0}t.mode=ri;case ri:if(t.wrap&&t.flags){for(;o<32;){if(s===0)break e;s--,l+=a[r++]<<o,o+=8}if(l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=z;break}l=0,o=0}t.mode=li;case li:F=Ka;break e;case z:F=Ti;break e;case Zi:return Ni;case Xa:default:return Z}return e.next_out=f,e.avail_out=d,e.next_in=r,e.avail_in=s,t.hold=l,t.bits=o,(t.wsize||u!==e.avail_out&&t.mode<z&&(t.mode<ft||i!==Ct))&&Hi(e,e.output,e.next_out,u-e.avail_out),g-=e.avail_in,u-=e.avail_out,e.total_in+=g,e.total_out+=u,t.total+=u,t.wrap&&u&&(e.adler=t.check=t.flags?D(t.check,n,u,e.next_out-u):Ee(t.check,n,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===H?128:0)+(t.mode===$e||t.mode===st?256:0),(g===0&&u===0||i===Ct)&&F===re&&(F=Va),F},tr=e=>{if(!e||!e.state)return Z;let i=e.state;return i.window&&(i.window=null),e.state=null,re},ir=(e,i)=>{if(!e||!e.state)return Z;let t=e.state;return(t.wrap&2)===0?Z:(t.head=i,i.done=!1,re)},nr=(e,i)=>{let t=i.length,a,n,r;return!e||!e.state||(a=e.state,a.wrap!==0&&a.mode!==Ge)?Z:a.mode===Ge&&(n=1,n=Ee(n,i,t,0),n!==a.check)?Ti:(r=Hi(e,i,t,t),r?(a.mode=Zi,Ni):(a.havedict=1,re))},ar=Oi,rr=$i,lr=Ci,sr=Ja,fr=Mi,or=er,hr=tr,dr=ir,_r=nr,ur="pako inflate (from Nodeca project)",P={inflateReset:ar,inflateReset2:rr,inflateResetKeep:lr,inflateInit:sr,inflateInit2:fr,inflate:or,inflateEnd:hr,inflateGetHeader:dr,inflateSetDictionary:_r,inflateInfo:ur};function cr(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gr=cr,Ki=Object.prototype.toString,{Z_NO_FLUSH:br,Z_FINISH:wr,Z_OK:Le,Z_STREAM_END:dt,Z_NEED_DICT:_t,Z_STREAM_ERROR:pr,Z_DATA_ERROR:oi,Z_MEM_ERROR:yr}=de;function Ue(e){this.options=qe.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zi,this.strm.avail_out=0;let t=P.inflateInit2(this.strm,i.windowBits);if(t!==Le)throw new Error(ie[t]);if(this.header=new gr,P.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Ae.string2buf(i.dictionary):Ki.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=P.inflateSetDictionary(this.strm,i.dictionary),t!==Le)))throw new Error(ie[t])}Ue.prototype.push=function(e,i){let t=this.strm,a=this.options.chunkSize,n=this.options.dictionary,r,f,s;if(this.ended)return!1;for(i===~~i?f=i:f=i===!0?wr:br,Ki.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),r=P.inflate(t,f),r===_t&&n&&(r=P.inflateSetDictionary(t,n),r===Le?r=P.inflate(t,f):r===oi&&(r=_t));t.avail_in>0&&r===dt&&t.state.wrap>0&&e[t.next_in]!==0;)P.inflateReset(t),r=P.inflate(t,f);switch(r){case pr:case oi:case _t:case yr:return this.onEnd(r),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||r===dt))if(this.options.to==="string"){let d=Ae.utf8border(t.output,t.next_out),l=t.next_out-d,o=Ae.buf2string(t.output,d);t.next_out=l,t.avail_out=a-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(o)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===Le&&s===0)){if(r===dt)return r=P.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ue.prototype.onData=function(e){this.chunks.push(e)};Ue.prototype.onEnd=function(e){e===Le&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function xt(e,i){let t=new Ue(i);if(t.push(e),t.err)throw t.msg||ie[t.err];return t.result}function vr(e,i){return i=i||{},i.raw=!0,xt(e,i)}var kr=Ue,xr=xt,mr=vr,Er=xt,Sr=de,Ar={Inflate:kr,inflate:xr,inflateRaw:mr,ungzip:Er,constants:Sr},{Deflate:Ir,deflate:zr,deflateRaw:Ur,gzip:Rr}=Da,{Inflate:Dr,inflate:Lr,inflateRaw:Tr,ungzip:Nr}=Ar;var Re=Lr;var I=class{constructor(i,t){this.byteLength=0;this.value=0;this.fileBytes=i,this.startIndex=t;let a=0;for(;this.fileBytes[this.startIndex+a]>=128&&this.startIndex+a<i.length;)a++;for(this.byteLength=a+1,this.value=this.fileBytes[this.startIndex+a];a>0;)this.value*=128,this.value+=this.fileBytes[this.startIndex+a-1]-128,a--}};var Je=class{static error(i,t,a){console.error(i)}static assert(i,t,a){i||console.debug(t?"Assertion failed: "+t:"Assertion failed.",a)}},De=class{get unsharedKey(){if(this.unsharedKeyBytes===void 0)return;let i=new DataView(this.unsharedKeyBytes.buffer,this.unsharedKeyBytes.byteOffset,this.unsharedKeyBytes.byteLength);return J.getAsciiString(i,0,i.byteLength)}get key(){if(this.keyCached)return this.keyCached;let i=this.previousKey,t="";i!==void 0&&(t=i.key.substring(0,this.sharedByteLength));let a=this.unsharedKey;return a!==void 0&&(t+=a),this.keyCached=t,t}get keyBytes(){if(!this.unsharedKeyBytes)return;if(this.fullBytesCached)return this.fullBytesCached;if(this.sharedByteLength===void 0||this.sharedByteLength===0)return this.unsharedKeyBytes;if(this.previousKey===void 0)throw new Error("Unexpected shared key without a previous");let i=this.previousKey.keyBytes;if(i===void 0)throw new Error("Unexpected shared key without previous bytes");let t=new Uint8Array(this.sharedByteLength+this.unsharedKeyBytes.length),a=this.sharedByteLength;for(let n=0;n<a;n++)t[n]=i[n];for(let n=0;n<this.unsharedKeyBytes.length;n++)t[n+a]=this.unsharedKeyBytes[n];return this.fullBytesCached=t,t}get isRestart(){return this.sharedByteLength===0}loadFromLdb(i,t,a){this.fileBytes=i,this.startIndex=t;let n=0,r=new I(this.fileBytes,this.startIndex);this.sharedByteLength=r.value,n+=r.byteLength,this.sharedByteLength>0&&(this.previousKey=a);let f=new I(this.fileBytes,this.startIndex+n);n+=f.byteLength;let s=new I(this.fileBytes,this.startIndex+n);n+=s.byteLength,this.unsharedKeyBytes=i.subarray(t+n,t+n+f.value-8),n+=f.value,this.value=i.subarray(t+n,t+n+s.value),n+=s.value,this.length=n}},J=class e{static getAsciiString(i,t,a,n){return e.readStringASCII(i,t,a).str}static getAsciiStringFromUint8Array(i){let t="";for(let a=0;a<i.length;a++)t+=String.fromCharCode(i[a]);return t}static readStringASCII(i,t,a){var n="",r=0;t=t||0;var f=!1;typeof a>"u"&&(f=!0,a=i.byteLength-i.byteOffset);for(var s,d=0;d<a&&(s=i.getUint8(d+t),!(s===0&&f));d++)n+=String.fromCharCode(s),r++;return{str:n,byteLength:r+(f?1:0)}}},ue=class{static getUnsignedInteger(i,t,a,n,r){let f=new ArrayBuffer(4),s=new Uint8Array(f);return s[0]=i,s[1]=t,s[2]=a,s[3]=n,new DataView(f).getUint32(0,r)}static getUnsignedShort(i,t,a){let n=new ArrayBuffer(2),r=new Uint8Array(n);return r[0]=i,r[1]=t,new DataView(n).getUint16(0,a)}},mt=class{constructor(i,t,a,n){this.ldbFiles=i,this.logFiles=t,this.manifestFiles=a,this.context=n,this.keys={}}_pushError(i,t){this.isInErrorState=!0,this.errorMessages===void 0&&(this.errorMessages=[]);let a;return t?a=this.context?this.context+"-"+t:t:a=this.context,Je.error(i+(a?" "+a:"")),this.errorMessages.push({message:i,context:a}),i}async init(i){this.keys={},this.isInErrorState=!1,this.errorMessages=void 0;for(let r=0;r<this.manifestFiles.length;r++){await this.manifestFiles[r].loadContent(!1);let f=this.manifestFiles[r].content;f instanceof Uint8Array&&f.length>0&&(this.parseManifestContent(f,this.manifestFiles[r].storageRelativePath),i&&await i("Loaded map manifest file '"+this.manifestFiles[r].fullPath+"'."))}let t=[];for(let r=0;r<this.ldbFiles.length;r++){let f=this.ldbFiles[r];try{let s=parseInt(f.name);if(!this.deletedFileNumber||!this.deletedFileNumber.includes(s)){let d=0;if(this.newFileLevel&&this.newFileNumber&&(Je.assert(this.newFileLevel.length===this.newFileNumber.length),this.newFileLevel.length===this.newFileNumber.length))for(let l=0;l<this.newFileNumber.length;l++)this.newFileNumber[l]===s&&(d=this.newFileLevel[l]);t.push({index:s,file:f,isDeleted:!1,level:d})}}catch(s){this._pushError("Error including LDB file: "+f.fullPath+" Error: "+s.toString())}}let a=t.sort((r,f)=>r.level===f.level?r.index-f.index:f.level-r.level);for(let r=0;r<a.length;r++){let f=a[r].file;await f.loadContent(!1);let s=f.content;if(s instanceof Uint8Array&&s.length>0){let d=this.parseLdbContent(s,f.storageRelativePath);i&&await i("Loaded map record file '"+f.fullPath+"'. Records: "+d)}}let n=this.logFiles.sort((r,f)=>r.name.localeCompare(f.name));for(let r=0;r<n.length;r++){await n[r].loadContent(!1);let f=n[r].content;if(f instanceof Uint8Array&&f.length>0){let s=this.parseLogContent(f,n[r].storageRelativePath);i&&await i("Loaded map latest-updates file '"+n[r].fullPath+"'. Records: "+s)}}}parseLdbContent(i,t){let a=0;if(i.length<=8||i[i.length-8]!==87||i[i.length-7]!==251||i[i.length-6]!==128||i[i.length-5]!==139||i[i.length-4]!==36||i[i.length-3]!==117||i[i.length-2]!==71||i[i.length-1]!==219){this._pushError("Unexpected bytes in LDB file. File seems unreadable.",t);return}let n=i.length-48,r=new I(i,n);n+=r.byteLength;let f=new I(i,n);n+=f.byteLength;let s=new I(i,n);n+=s.byteLength;let d=new I(i,n);if(n+=d.byteLength,s.value<=0||s.value+d.value>=i.length)return this._pushError("LDB content index offset not within bounds.",t),!1;if(r.value<=0||r.value+f.value>=i.length)return this._pushError("LDB meta index offset not within bounds.",t),!1;let l=i.subarray(s.value,s.value+d.value),o;try{o=Re(l,{raw:!0})}catch{}if(!o)try{o=Re(l)}catch{}if(o||(o=l,this._pushError("Treating level DB content as compressed.",t)),o){let g={};if(!this.parseIndexBytes(o,0,o.length,g,t))return!1;for(let u in g){let h=g[u];if(h&&h.value){let c=h.value,A=0,v=new I(c,A);A+=v.byteLength;let p=new I(c,A);if(A+=p.byteLength,v.value<0||v.value+p.value>=i.length){this._pushError("Block offset does not appear correct",t);return}if(A!==c.length){this._pushError("Index byte index is not correct",t);return}let m=i.subarray(v.value,v.value+p.value),y;try{y=Re(m,{raw:!0})}catch{}if(!y)try{y=Re(m)}catch{}y||(y=m),a+=this.parseLdbBlockBytes(y,0,y.length,t)}else this._pushError("Could not find index key.",t)}}return a===0&&this._pushError("No keys found in LDB.",t),a}parseIndexBytes(i,t,a,n,r){let f=t,s,l=ue.getUnsignedInteger(i[a-4],i[a-3],i[a-2],i[a-1],!0)*4+4;for(;f<t+a-l;){let o=new De;o.loadFromLdb(i,f,s);let g=o.key;if(s=o,n[g]=o,o.length===void 0)return this._pushError("Unexpected parse of level key value "+g,r),!1;f+=o.length}return!0}parseLdbBlockBytes(i,t,a,n){let r=t,f=0,s,l=ue.getUnsignedInteger(i[a-4],i[a-3],i[a-2],i[a-1],!0)*4+4;if(l>t+a)return this._pushError("Unexpected size received for LDB bytes. File could be corrupt.",n),0;for(;r<t+a-l;){let o=new De;o.loadFromLdb(i,r,s);let g=o.key;if(s=o,this.keys[g]=o,o.length===void 0||o.length<0)throw new Error(this._pushError("Unexpected parse of key "+g,n));f++,r+=o.length}return f}parseLogContent(i,t){let a=0,n,r=0;for(;a<i.length-6;){let f=ue.getUnsignedShort(i[a+4],i[a+5],!0),s=i[a+6];if(a+=7,s===1)r+=this.addValueFromLog(i,a,f,t);else if(s===2)n=new Uint8Array(i.buffer,a,f);else if(s===3||s===4)if(n!==void 0){let l=new Uint8Array(i.buffer,a,f),o=new Uint8Array(n.byteLength+l.byteLength);o.set(n),o.set(l,n.byteLength),n=o,s===4&&(r+=this.addValueFromLog(n,0,n.length,t))}else{this._pushError("Unexpected middle to a set of bytes found within LevelDB content. File seems unreadable.",t);return}else{this._pushError("Unexpected type for log file. File seems unreadable.",t);return}a+=f;let d=32768-a%32768;for(;d<=6&&d>0;)d--,i[a]!==0&&this._pushError("Unexpectedly found a padding trailer with data",t),a++}return r<=0&&this._pushError("Did not find any keys in log file",t),r}addValueFromLog(i,t,a,n){let r=t;t+=12;let f=0;for(;t<=r+a-5;){let s=i[t];t++;let d=new I(i,t);t+=d.byteLength;let l=new Uint8Array(d.value);for(let o=0;o<d.value;o++)l[o]=i[t+o];if(t+=d.value,t>i.length&&this._pushError("Unexpected log file length issue.",n),t<=i.length){let o=J.getAsciiStringFromUint8Array(l);if(o===void 0&&this._pushError("Unexpected empty key in a log file. File could be unreadable.",n),f++,s){t>=i.length&&this._pushError("Unexpectedly leftover content in a log file. File could be unreadable.",n);let g=new I(i,t);if(t+=g.byteLength,g.value+t<=i.buffer.byteLength){let u=new Uint8Array(i.buffer,t,g.value);t+=g.value;let h=new De;h.sharedKey="",h.keyDelta=o,h.unsharedKeyBytes=l,h.value=u,this.keys[o]=h}}else this.keys[o]=!1}}return f}parseManifestContent(i,t){let a=0,n;for(this.comparator=void 0,this.logNumber=void 0,this.nextFileNumber=void 0,this.lastSequence=void 0,this.compactPointerLevels=void 0,this.compactPointerStrings=void 0,this.deletedFileLevel=void 0,this.deletedFileNumber=void 0,this.newFileLevel=void 0,this.newFileNumber=void 0,this.newFileSize=void 0,this.newFileSmallest=void 0,this.newFileLargest=void 0;a<i.length-6;){let r=ue.getUnsignedShort(i[a+4],i[a+5],!0),f=i[a+6];if(a+=7,f===1)this.addValueFromManifest(i,a,r);else if(f===2)n=new Uint8Array(i.buffer,a,r);else if(f===3||f===4)if(n!==void 0){let d=new Uint8Array(i.buffer,a,r),l=new Uint8Array(n.byteLength+d.byteLength);l.set(n),l.set(d,n.byteLength),n=l,f===4&&this.addValueFromManifest(n,0,n.length)}else{this._pushError("Unexpected middle to a set of bytes found within a manifest file. File could be unreadable.",t);return}else{this._pushError("Unexpected type for manifest file.  File could be unreadable.",t);return}a+=r;let s=32768-a%32768;for(;s<=6&&s>0;)s--,i[a]!==0&&this._pushError("Unexpectedly found a padding trailer with data in a manifest file.",t),a++}}addValueFromManifest(i,t,a,n){let r=t;for(;t<r+a;){let f=new I(i,t);switch(t+=f.byteLength,f.value){case 1:let s=new I(i,t);t+=s.byteLength;let d=new Uint8Array(s.value);for(let w=0;w<s.value;w++)d[w]=i[t+w];t+=s.value,t>i.length&&this._pushError("Unexpected manifest file length issue.",n),this.comparator=J.getAsciiStringFromUint8Array(d),this.comparator===void 0&&this._pushError("Unexpected comparator.",n);break;case 2:let l=new I(i,t);t+=l.byteLength,this.logNumber=l.value;break;case 3:let o=new I(i,t);t+=o.byteLength,this.nextFileNumber=o.value;break;case 4:let g=new I(i,t);t+=g.byteLength,this.lastSequence=g.value;break;case 5:this.compactPointerLevels===void 0&&(this.compactPointerLevels=[]),this.compactPointerStrings===void 0&&(this.compactPointerStrings=[]);let u=new I(i,t);t+=u.byteLength,this.compactPointerLevels.push(u.value);let h=new I(i,t);t+=h.byteLength;let c=new Uint8Array(h.value);for(let w=0;w<h.value;w++)c[w]=i[t+w];t+=h.value,t>i.length&&this._pushError("Unexpected manifest file length issue at compact pointer.",n),this.compactPointerStrings.push(J.getAsciiStringFromUint8Array(c)),this.compactPointerStrings[this.compactPointerStrings.length-1]===void 0&&this._pushError("Unexpected compact pointer string.",n);break;case 6:this.deletedFileLevel===void 0&&(this.deletedFileLevel=[]),this.deletedFileNumber===void 0&&(this.deletedFileNumber=[]);let A=new I(i,t);t+=A.byteLength,this.deletedFileLevel.push(A.value);let v=new I(i,t);t+=v.byteLength,this.deletedFileNumber.push(v.value);break;case 7:this.newFileLargest===void 0&&(this.newFileLargest=[]),this.newFileLevel===void 0&&(this.newFileLevel=[]),this.newFileNumber===void 0&&(this.newFileNumber=[]),this.newFileSmallest===void 0&&(this.newFileSmallest=[]),this.newFileSize===void 0&&(this.newFileSize=[]);let p=new I(i,t);t+=p.byteLength,this.newFileLevel.push(p.value);let m=new I(i,t);t+=m.byteLength,this.newFileNumber.push(m.value);let y=new I(i,t);t+=y.byteLength,this.newFileSize.push(y.value);let _=new I(i,t);t+=_.byteLength;let S=new Uint8Array(_.value);for(let w=0;w<_.value;w++)S[w]=i[t+w];t+=_.value,t>i.length&&this._pushError("Unexpected manifest file length issue at new file smallest.",n),this.newFileSmallest.push(J.getAsciiStringFromUint8Array(S)),this.newFileSmallest[this.newFileSmallest.length-1]===void 0&&this._pushError("Unexpected file smallest tag string.",n);let U=new I(i,t);t+=U.byteLength;let b=new Uint8Array(U.value);for(let w=0;w<U.value;w++)b[w]=i[t+w];t+=U.value,t>i.length&&this._pushError("Unexpected manifest file length issue at new file largest.",n),this.newFileLargest.push(J.getAsciiStringFromUint8Array(b)),this.newFileLargest[this.newFileLargest.length-1]===void 0&&this._pushError("Unexpected file largest tag string.",n);break;case 9:let F=new I(i,t);t+=F.byteLength,this.previousLogNumber=F.value;break;default:this._pushError("Unexpected manifest item: "+f.value,n)}}}};export{mt as default};
/*! Bundled license information:

pako/dist/pako.esm.mjs:
  (*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
